const nodeGeocoder = require("node-geocoder");
const fs = require("fs");

let options = {
  provider: "google",
  apiKey: "", // my api key
};

const type = "Gold";

const mines = [
  "Adams Mine",
  "Agnew Lake Mine",
  "Amalgamated Larder Mine",
  "Argonaut Mine",
  "Armistice Mine",
  "Associated Goldfields Mine",
  "Barber Larder Mine",
  "Barton Mine",
  "Beanland Mine",
  "Bell Creek Mine",
  "Bidgood Mine",
  "Big Dan Mine",
  "Black Fox Mine",
  "Buckles Mine",
  "Campbell Mine",
  "Can-Met Mine",
  "Cheminis Mine",
  "Chesterville Mine",
  "Coleman Mine",
  "Copper Cliff North Mine",
  "Copper Cliff South Mine",
  "Copperfields Mine",
  "Coppersand Mine",
  "Craig Mine",
  "Creighton Mine",
  "Denison Mine",
  "Detour Gold Mine",
  "Dome Mine",
  "Eagle River Mine",
  "Falconbridge Mine",
  "Frood Mine",
  "Fraser Mine",
  "Garson Mine",
  "Geco Mine",
  "Goderich Salt Mines - Sifto Canada",
  "Golden Giant Mine",
  "Hagersville-CGC",
  "Hemlo Mine",
  "Hermiston-McCauley Mine",
  "Hollinger Mines",
  "Holloway Mine",
  "Holt Mine",
  "Hoyle Pond Mine",
  "Hudson Rand Mine",
  "Kanichee Mine",
  "Keeley-Frontier Mine",
  "Kerr-Addison Mine",
  "Kidd Mine",
  "Kirkland Gold Mine",
  "Lac Des Iles Mine",
  "Lacnor Mine",
  "Laguerre Mine",
  "Lake Shore Mine",
  "Leckie Mine",
  "Lockerby Mine",
  "Macassa Mine",
  "Madawaska Mine",
  "Marmoraton Mine",
  "Martin Bird Mine",
  "McIntyre Mines",
  "McWatters Mine",
  "Milliken Mine",
  "Montcalm Mine",
  "Morris Kirkland Mine",
  "Murray Mine",
  "Musselwhite mine",
  "Nickel Rim Mine",
  "Nickel Rim South Mine",
  "Nordic Mine",
  "Norrie Mine",
  "Northland Pyrite Mine",
  "O'Connor Mine",
  "Omega Mine",
  "Pamour Mine",
  "Panel Mine",
  "Pawnee Mine",
  "Paymaster Mine",
  "Probe Mines",
  "Pronto Mine",
  "Queenston Mine",
  "Quirke Mine",
  "Red Lake Mine",
  "Redstone Mine",
  "Sherman Mine",
  "Sifto Salt Mine",
  "Spanish American Mine",
  "Stanleigh Mine",
  "Stanrock Mine",
  "Strathcona Mine",
  "Sylvanite Mine",
  "Talon Chutes",
  "Teck-Hughes Mine",
  "Temagami-Lorrain Mine",
  "Thayer-Lindsay Mine",
  "Timmins West Mine",
  "Tough-Oakes (Toburn) Mine",
  "Upper Beaver Mine",
  "Upper Canada Mine",
  "Victor Diamond Mine",
  "Windsor Salt Mine - Canadian Salt Company",
  "Wilroy Mine",
  "Wright-Hargreaves Mine",
  "Young Davidson Mine",
];

let geoCoder = nodeGeocoder(options);
const mineRequests = mines.map((mine) => {
  return geoCoder.geocode(mine);
});

Promise.all(mineRequests).then((geocodes) => {
  const results = geocodes.map((geocode, index) => {
    console.log(geocode);
    return geocode[0]
      ? `${mines[index]},${type},${geocode[0].latitude},${geocode[0].longitude}`
      : false;
  });
  try {
    const data = fs.writeFileSync(
      "./tmp.txt",
      results.filter((res) => Boolean(res)).join("\n")
    );
    //file written successfully
  } catch (err) {
    console.error(err);
  }
});
